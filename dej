#!/bin/sh

# Don't move or edit this file manually!
# SOURCE

# Prints a message with a new line at end
printfl () {
    printf "$1\n"
}

# Helps path
help="src/help.php"

# Errors while entering commands
moreInfo="Try 'dej help' for more information."

badUsageError=\
"Bad usage.
$moreInfo"

unknownCommandError=\
"Unknown command
$moreInfo"

# No arguments supplied
if [ $# -eq 0 ]; then
    php $help "help";

# An arguments supplied
else
    case $1 in
        # Start PHP process for each command
        start|stop|status|restart)
            if [ $# -gt 1 ]; then
                printfl "$badUsageError"
                exit
            fi
            sh src/php.sh $1
            ;;
        help|-h|--help)
            case $# in
                1)
                    php $help "help"
                    ;;
                2)
                    php $help $2
                    ;;
                *)
                    printfl "$badUsageError"
                    ;;
            esac
            ;;
        config)
            case $# in
                2)
                    case $2 in
                        # User wants a list of available fields
                        list)
                            php $help "config_list"
                            ;;
                        # User wants to create the configuration file
                        create|check)
                            sh src/php.sh $2
                            ;;
                        *)
                            printfl "$badUsageError"
                            ;;
                    esac
                    ;;
                3)
                    sh src/php.sh config $2 $3
                    ;;
                *)
                    printfl "$badUsageError"
                    ;;
            esac
            ;;
        *)
            printfl "$unknownCommandError"
            ;;
    esac
fi